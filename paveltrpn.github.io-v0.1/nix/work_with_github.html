<!DOCTYPE HTML>
<html>
    <head>
        <title>Работа с GITHUB</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/prism.css"/> <!-- Тема подсветки кода для Prism -->

        <!-- Подключение локального MathJax -->
        <script type="text/javascript" id="MathJax-script" async
        src="../js/MathJax3.0.0/es5/tex-svg.js">
            MathJax.Hub.Config({
                extensions: ["tex2jax.js","TeX/noErrors.js"],
	            jax: ["input/TeX","output/HTML-CSS"],
	            tex2jax: {inlineMath: [['$','$'],["\\(","\\)"]]},
	            "HTML-CSS": {availableFonts:["TeX"]}
            });
        </script>
    </head>
    <body>
        <!-- Подключение скрипта Prism -->
        <script src="../js/prism.js"></script>

        <div class="container">

        <div class="menu">
            <ul>
                <li><a href="../index.html">На главную</a></li> 
            </ul>      
        </div>

        <div class="A4">

            <p class="section">
                РАБОТА С GITHUB
            </p>
            
            <p class="subsection">
                Настройка Git
            </p>

            <p class="plain">
                После того как Git появился на компьютере, нужно ввести свои данные, а именно имя и адрес электронной почты. 
                Ваши действия в Git будут содержать эту информацию.<br>
                <br>
                Откройте терминал и используйте следующую команду, чтобы добавить своё имя:
            </p>
            
           <pre class="line-numbers">
    <code class="language-shell">$  git config --global user.name "имя"</code></pre>
               
            <p class="plain">
                Обратите внимание, что в командах, указанных выше, есть опция --global. Это значит, что такие данные будут 
                сохранены для всех ваших действий в Git и вводить их больше не надо. Если вы хотите менять эту информацию 
                для разных проектов, то в директории проекта вводите эти же команды, только без опции --global.
            </p>

            <p class="plain">
                <b>Скачать</b> репозиторий из облака <i>(с www.github.com):</i>
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git clone git://github.com/USER_NAME/REPO_NAME
    или вот так (после настройки SSH)
    $ git clone git@github.com:your-nickname/your-project.git</code></pre>

            <p class="plain">
                Кстати, если вы хотите, чтобы название папки с проектом у вас на компьютере отличалось от имени репозитория,
                можете дополнить команду клонирования, добавив в конце другое название:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git clone git@github.com:_your-nickname_/_your-project_.git folder_name</code></pre>

            <p class="plain">
                <b>Сделать алиас</b> на другое имя накоторо репозитория. Что-бы работали пуш и пулл нужно что-бы алиас ссылался на <i>https:</i>
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ cd REPO_NAME
    $ git remote add ALIAS_NAME https://github.com/USER_NAME/REPO_NAME</code></pre>
            
            <p class="plain">
                <b>Посмотреть</b>, с какими ветками мы сейчас работаем:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git branch</code></pre>

            <p class="plain">
                <b>Переключиться</b> между существующими ветками в проекте:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git checkout имя-ветки</code></pre>

            <p class="plain">
                <b>Сделать новый branch</b>
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git checkout -b имя-новой-ветки</code></pre>

            <p class="plain">
                Если вы ошиблись в названии, например, допустили опечатку, вы можете изменить название ветки с помощью команды:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git branch -m старое-имя-ветки новое-имя-ветки</code></pre>

            <p class="subsection">
                Pullrequest
            </p>

            <p class="plain">
                Что такое пулреквест? Это предложение изменить код в репозитории.<br>
                <br>
                Любое предложение можно принять или отвергнуть. Так же и с пулреквестом. После его создания, он должен 
                получить ревью и одобрение так называемого коллаборатора — пользователя GitHub, который имеет права 
                администратора в мастер-репозитории. Им может быть ваш коллега-разработчик, техлид, наставник. Если к вашему 
                коду нет вопросов, пулреквест принимается и изменения из вашей ветки попадают в master главного репозитория. 
                Если в код нужно внести изменения, пулреквест отклоняется, и вам нужно снова пройти по цепочке локальные 
                изменения — сохранение — коммит — пуш, только пулреквест заново делать не нужно. Если вы продолжаете 
                вести работу в той же ветке и пулреквест ещё не принят, все ваши изменения автоматически добавятся в 
                пулреквест, созданный из этой ветки после команды git push origin название-текущей-ветки.<br>
                <br>
                Вы исправили код, наставник или техлид одобрил ваши правки и принял пулреквест. Теперь код в 
                мастер-репозитории обновился, а в вашем форке нет, вы ведь не обновляли свою версию репозитория 
                с тех пор, как клонировали её себе на компьютер. Приведём форк в актуальное состояние.<br>
                <br>
                - В локальном репозитории вводим команду git checkout master, переходим в master.<br>
                <br>
                - Теперь забираем (подтягиваем) изменения из ветки master мастер-репозитория git pull academy master. 
                Academy здесь — сокращённое название мастер-репозитория, такое имя используется в проектах студентов 
                Академии, вы можете выбрать любое другое название.<br>
                <br>
                Если консоль выдаёт ошибку и говорит, что не знает директории с таким именем, нужно добавить ссылку на этот репозиторий:<br>
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git remote add academy git@github.com:your-repo.git</code></pre>
            
            <p class="plain">
                Вместо academy указывайте своё название и оно закрепится за этим репозиторием.<br>
                <br>
                Теперь отправьте изменения уже из своей ветки master в ваш форк на GitHub с помощью команды/
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git push origin master.</code></pre>

            <p class="plain">
                <b>Фиксация изменений (или добавление коммита):</b>
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git commit -am «COMMIT_NAME»
    $ git push REPO_NAME master</code></pre>

            <p class="plain">
                <b>Отмена последнего коммита</b>, например когда вы делаете коммит слишком рано, забыв 
                добавить какие-то файлы, или напутали с комментарием к коммиту. Если вам хотелось бы 
                сделать этот коммит ещё раз, вы можете выполнить commit с опцией <i>--amend:</i>
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git commit --amend</code></pre>

            <p class="plain">
               Для примера, если после совершения коммита вы осознали, что забыли проиндексировать 
               изменения в файле, которые хотели добавить в этот коммит, вы можете сделать что-то подобное: 
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git commit -m 'initial commit'
    $ git add forgotten_file
    $ git commit —amend</code></pre>

            <p class="plain">
                Все три команды вместе дают один коммит — второй коммит заменяет результат первого.
            </p>

            <p class="plain">
                <b>Обновление</b> локального репозитория:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ cd REPO_NAME
    $ git pull</code></pre>

            <p class="plain">
                Для того чтобы <b>начать отслеживать</b> (добавить под версионный контроль) новый файл, 
                используется команда git add. Чтобы начать отслеживание файла FILE_NAME, вы можете выполнить следующее:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git add FILE_NAME</code></pre>

            <p class="plain">
                Основной инструмент, используемый для определения, <b>какие файлы в каком состоянии находятся</b> — это команда git status. 
                Если вы выполните эту команду сразу после клонирования, вы увидите что-то вроде этого:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git status
    # On branch master
    nothing to commit, working directory clean</code></pre>

            <p class="plain">
                Это означает, что у вас чистый рабочий каталог, другими словами — в нём нет отслеживаемых 
                изменённых файлов. Git также не обнаружил неотслеживаемых файлов, в противном случае они бы 
                были перечислены здесь. И наконец, команда сообщает вам на какой ветке (branch) вы сейчас находитесь. 
            </p>

            <p class="plain">
                Для того чтобы <b>удалить файл из Git'а</b>, вам необходимо удалить его из отслеживаемых файлов 
                (точнее, удалить его из вашего индекса) а затем выполнить коммит. Это позволяет сделать 
                команда git rm, которая также удаляет файл из вашего рабочего каталога, так что вы в 
                следующий раз не увидите его как “неотслеживаемый”.
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git rm FILE_NAME</code></pre>

            <p class="plain">
                <b>Удалить</b> файл FILE_NAME из индекса, оставив его при этом в рабочем каталоге:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git rm --cached FILE_NAME</code></pre>

            <p class="plain">
                <b>Переместить</b> файл hello.html в каталог lib
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ mkdir lib
    $ git mv hello.html lib
    $ git status</code></pre>
            
            <p class="plain">
                Перемещая файлы с помощью git, мы информируем git о 2 вещах:<br>

                &emsp;1) Что файл <i>hello.html</i> был удален.<br>
                &emsp;2) Что файл <i>lib/hello.html</i> был создан.<br>
            
                Оба эти факта сразу же проиндексированы и готовы к коммиту. Команда git status сообщает, что файл был перемещен.
            </p>

            <p class="plain">
                <b>Добавить каталог</b> все файлы и подкаталоги в нём:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git add .</code></pre>

            <p class="plain">
                Именно точка, звёздочка * добавит только файлы в каталоге, игнорируя подкаталоги с файлами.
            </p>

            <p class="subsection">
                Испарвление ошибки с добавлением нового коммита в удалённый репозиторий из неактуального локального репозитория.
            </p>

            <p class="plain">
                При попытке сделать новый коммит в удалённый репозиторий из локального и выполнении <i>$ git push</i> выпадает ошибка. Истправляется так:
            </p>

            <pre class="line-numbers">
    <code class="language-shell">$ git fetch --all
    $ git reset --hard origin/&lt;branch_name&gt; (например master)
    $ git fetch — скачивает последнее из удалённого репозитория не совершая попыток смержить или заменить что либо.
    $ git reset — сбрасывает ветку master к тому, что только что было подобрано <i>(fetch)</i>. 
    Опция <i>--hard</i> заменяет все файлы в рабочем дереве каталогов на файлы, имеющиеся в <i>origin/master</i>.</code></pre>

        </div>

        <div class="menu">
            <ul>
                <li><a href="../index.html">На главную</a></li> 
            </ul>      
        </div>

        </div>
        
    </body>
</html>