<!DOCTYPE HTML>
<html>
    <head>
        <title>Настройка SSH ключей для GitHub</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/prism.css"/> <!-- Тема подсветки кода для Prism -->

        <!-- Подключение локального MathJax -->
        <script type="text/javascript" id="MathJax-script" async
        src="../js/MathJax3.0.0/es5/tex-svg.js">
            MathJax.Hub.Config({
                extensions: ["tex2jax.js","TeX/noErrors.js"],
	            jax: ["input/TeX","output/HTML-CSS"],
	            tex2jax: {inlineMath: [['$','$'],["\\(","\\)"]]},
	            "HTML-CSS": {availableFonts:["TeX"]}
            });
        </script>
        <!-- ============================== -->
    </head>
    <body>
        <!-- Подключение скрипта Prism -->
        <script src="../js/prism-1.17.1.js"></script>

        <div class="A4">
            <br>
            <p class="section">
                НАСТРОЙКА SSH КЛЮЧЕЙ ДЛЯ GITHUB
            </p>

            <p class="small">
                (https://htmlacademy.ru/blog/useful/git/git-console)
            </p>

            <p class="plane">
                Git установлен, профиль на GitHub создан. Осталось добавить SSH-ключ и можно приступать к работе с проектом.<br>
                <br>
                Что такое SSH-ключ и зачем он нужен?<br>
                <br>
                Чтобы работать со своего компьютера с GitHub, иметь доступ к проектам, хранящимся на сервисе, выполнять 
                команды в консоли без постоянного подтверждения пароля, нужно пройти авторизацию у сервера. В этом помогают SSH-ключи.<br>
                <br>    
                Каждый SSH-ключ содержит пару: открытый (публичный) и закрытый (приватный) ключ. Открытый ключ отправляется на 
                сервер, его можно не прятать от всех и не переживать, что кто-то его увидит и украдёт. Он бесполезен без своей 
                пары — закрытого ключа. А вот закрытый ключ — секретная часть. Доступ к нему должен быть только у вас.<br>
                <br>
                Вы отправляете какую-то информацию на сервер, где хранится ваш публичный ключ, сервер понимает, что вы это вы, 
                то есть идентифицирует именно вас, и даёт вам какой-то ответ. И только вы можете расшифровать этот ответ, 
                потому что только у вас есть подходящий закрытый ключ. Получается что-то вроде связки логин-пароль только 
                намного безопасней. Ваш пароль кто-то может узнать или подобрать, а чтобы получить ваш приватный SSH-ключ, 
                злоумышленнику придётся взломать ваш компьютер.<br>
                <br>
                Чтобы пройти авторизацию по SSH-ключу, его надо сгенерировать или найти уже ранее созданный ключ на своём компьютере.<br>
                <br>
                Сначала проверим, есть ли уже на компьютере ключ. По умолчанию SSH-ключи хранятся в каталоге ~/.ssh, поэтому нужно 
                проверить содержимое этого каталога.
            </p>

            <p class="plane">
                1. Открываем консоль.<br>
                <br>
                2. Вводим cd ~/.ssh, чтобы перейти в нужный каталог.<br>
                <br>
                3. Используем ls, чтобы увидеть список всех файлов в каталоге.<br>
                <br>
                Ищем пару файлов с названиями вида имя и имя.pub. Обычно имя — id_rsa, id_dsa, id_ecdsa или id_ed25519. 
                Файл с расширением .pub — ваш публичный ключ, а второй — ваш приватный, секретный ключ. Если таких файлов 
                или даже каталога .ssh у вас нет, вы можете их сгенерировать. Для этого делаем следующее.<br> 
                <br>
                Открываем консоль и вводим команду:
            </p>

            <pre>
                <code class="language-shell">$ ssh-keygen -t rsa -b 4096 -C "your_mail@example.com"</code></pre> 

            <p class="plane">
                Указываем тот адрес электронной почты, который вводили при регистрации на GitHub.
            </p>

            <pre>
                <code class="language-shell">$ ssh-keygen -t rsa -b 4096 -C "your_mail@example.com"
                Generating private/public rsa key pair.
                Enter file in which to save the key (/Users/username/.ssh/id_rsa):</code></pre> 

            <p class="plane">
                - Далее нужно указать расположение файла для сохранения ключа. Если вы не введёте путь до файла и просто 
                нажмёте Enter, ключ сохранится в файле, указанном в скобках.<br>
                <br>
                - Теперь нужно установить пароль к вашему ключу и дважды ввести его. Если вы не хотите вводить пароль каждый 
                раз, когда используете ключ, пропустите этот шаг, нажав «Enter», и ничего не вводите.
            </p>

            <pre>
                <code class="language-shell">$ ssh-keygen -t rsa -b 4096 -C "your_mail@example.com"
                Generating private/public rsa key pair.
                Enter file in which to save the key (/Users/username/.ssh/id_rsa): /Users/pavlushk0/git-keys
                Enter passphrase (empty for no passphrase):</code></pre>

            <p class="plane">
                4. Добавляем ключ в ssh-agent (сгенерированный или уже существующий). Проверяем доступность ключа командой eval 
                "$(ssh-agent -s)" и добавляем с помощью ssh-add ~/.ssh/your_key_name, где указываем верный путь до файла с ключом и его имя.
            </p>

            <pre>
                <code class="language-shell">$ ssh-add /Users/pavlushk0/git-keys
                Identity added: .......</code></pre>

            <p class="plane">
                <b>Несколько важных примечаний:</b><br>
                <br>
                - Если вы захотите переименовать ключ, могут возникнуть проблемы. Их можно решить, добавив в ~/.ssh/config связь 
                ключа с доменом.<br>
                <br>
                - Если у вас Windows и вы пользуетесь программой Cmder, возможны проблемы с командой eval "$(ssh-agent -s)". 
                Может появиться такое сообщение об ошибке: «eval не является внутренней или внешней командой, 
                исполняемой программой или пакетным файлом».<br>
                <br>
                - В Сmder для запуска ssh-agent можно использовать команду start-ssh-agent.<br>
                <br>
                Если проблема осталась, рекомендуем работать в Git Bash.<br>
                <br>
                - Если у вас macOS Sierra версии 10.12.2 и выше, нужно изменить ваш ~/.ssh/config файл, чтобы автоматически 
                загрузить ключи в ssh-agent и хранить пароли.
            </p>

            <pre>
                <code class="language-shell">Host *
                AddKeysToAgent yes
                UseKeychain yes
                IdentityFile ~/.ssh/id_rsa</code></pre>

            <p class="plane">
                Вы можете добавить свой приватный ключ в ssh-agent и сохранить пароль к нему с помощью команды ssh-add -K ~/.ssh/id_rsa.
                Если у вашего ключа другое имя, не забудьте заменить id_rsa в команде на правильное название.<br>
                <br>
                - Если у вас Linux, может понадобится переназначить для ~/.ssh права доступа командой chmod 700 ~/.ssh/<br>
                <br>
                5. После того как создан ключ, его нужно добавить на GitHub. Для этого копируем его содержимое с помощью одной из 
                следующих команд:<br>
                <br>
                - Если вы на Windows - clip.<br>
                <br>
                - Для пользователей macOS - pbcopy.<br>
                <br>
                - На Linux используйте sudo apt-get install xclip, чтобы установить необходимый для копирования пакет xclip, а 
                затем введите xclip -sel clip . Или введите команду cat ~/.ssh/id_rsa.pub, контент документа появится прямо в 
                консоли и вы сможете скопировать ключ оттуда.<br>
                <br>
                Можно пойти другим путём, открыть файл id_rsa.pub прямо в папке и просто скопировать содержимое оттуда.<br>
                <br>
                6. Переходим на страницу для работы с ключами в вашем профиле на GitHub.<br>
                <br>
                Нажимаем кнопку New SSH key (новый SSH-ключ). Вводим имя ключа (можно придумать абсолютно любое) в поле Title 
                (название), а в Key (ключ) вставляем сам ключ из буфера обмена. Теперь нажимаем Add SSH key (добавить SSH-ключ).<br>
                <br>
                Если всё сделано верно, в списке появится новый ключ.<br>
                <br>

            </p>
            <br>
        </div>
    </body>
</html>